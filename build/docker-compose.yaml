version: "3.8"

services:
  # app:
  #   image: docker.io/tomelin/desafio-fc:0.10.0 
  #   hostname: desafio_app
  #   container_name: desafio_app
  #   ports:
  #     - "8443:8443"
  #     - "8082:8082"
  #     - "50051:50051"
  #   depends_on:
  #     - database
  #     - redis
  # database:
  #   hostname: desafio_database
  #   container_name: desafio_database
  #   image: docker.io/postgres:12
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - ./scripts/init.sql:/docker-entrypoint-initdb.d/init.sql
  #   environment:
  #     POSTGRES_PASSWORD: UE9TVEdSRVNfUEFTU1dPUkQK
  #     POSTGRES_USER: admin
  #     POSTGRES_DB: desafio
  redis:
    hostname: cache
    container_name: cache
    image: docker.io/redis
    command: redis-server --requirepass cmVkaXMtc2VydmVyCg --bind 0.0.0.0
    environment:
      - REDIS_DISABLE_COMMANDS=FLUSHDB,FLUSHALL
      - REDIS_DATABASES=10
    ports:
      - "6379:6379"
  redis-commander:
    container_name: redis_admin
    hostname: redis_admin
    image: docker.io/rediscommander/redis-commander:latest
    restart: always
    environment:
      REDIS_HOSTS: redis
      REDIS_HOST: redis
      REDIS_PORT: redis:6379
      REDIS_PASSWORD: cmVkaXMtc2VydmVyCg
      HTTP_USER: admin
      HTTP_PASSWORD: admin
    ports:
    - "8081:8081"
